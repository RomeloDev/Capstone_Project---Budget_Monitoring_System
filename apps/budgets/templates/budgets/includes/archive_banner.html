{% load archive_tags %}
<!-- Archive Banner Include Template -->
<!-- Usage: {% include 'budgets/includes/archive_banner.html' with record=pre_record %} -->

{% if record.is_archived %}
<div class="bg-purple-50 border-l-4 border-purple-500 p-4 mb-6 rounded-lg shadow-sm animate-fade-in">
    <div class="flex">
        <div class="flex-shrink-0">
            <svg class="h-6 w-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path>
            </svg>
        </div>
        <div class="ml-3 flex-1">
            <h3 class="text-sm font-medium text-purple-800 flex items-center">
                <span class="mr-2">ðŸ“¦ Archived Record - Read Only</span>
            </h3>
            <div class="mt-2 text-sm text-purple-700">
                {% if user.is_admin %}
                    <p class="mb-2">This record is archived. You can view all details, but editing is disabled. To restore this record, visit the <a href="{% url 'archive_center' %}" class="underline font-semibold hover:text-purple-900">Archive Center</a>.</p>
                {% else %}
                    <p class="mb-2">This record is archived and is read-only. You cannot edit or submit new documents for archived records.</p>
                {% endif %}

                {% if record.archived_at %}
                <div class="text-xs mt-2 flex items-center">
                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    Archived on: {{ record.archived_at|date:"F d, Y \a\t g:i A" }}
                </div>
                {% endif %}

                {% if record.archived_by %}
                <div class="text-xs mt-1 flex items-center">
                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    Archived by: {{ record.archived_by.get_full_name }}
                </div>
                {% endif %}

                {% if record.archive_reason %}
                <div class="text-xs mt-2 p-2 bg-purple-100 rounded border border-purple-200">
                    <strong>Reason:</strong> {{ record.archive_reason }}
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<style>
@keyframes fade-in {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}
.animate-fade-in {
    animation: fade-in 0.3s ease-in-out;
}
</style>
{% endif %}
